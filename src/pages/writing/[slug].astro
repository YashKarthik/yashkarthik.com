---
import type { MarkdownLayoutProps, MDXLayoutProps } from 'astro';
import path from "node:path";
import BlogLayout from "../../layouts/BlogLayout.astro";

import Divider from "../../components/Divider.astro";
import Image from '../../components/Image.astro';
import Link from '../../components/Link.astro'

type Frontmatter = {
  title: string;
  started: string;
  updated: string;
  description: string;
  topics: string[];
  completionLevel: string;
};

export async function getStaticPaths() {
  const posts = await Astro.glob<Frontmatter>('../../blog/*.mdx');
  return posts.map(post => ({
    params: { slug: path.parse(post.file).name },
    props: post,
  }));
}

const {
  frontmatter,
  default: Content
} = Astro.props

---

<BlogLayout {...frontmatter}>
  <Content components={{ hr: Divider, img: Image, a: Link }} />
</BlogLayout>
