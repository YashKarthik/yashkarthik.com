---
import Layout from '../layouts/Layout.astro';
import { CollectionEntry, getCollection } from 'astro:content';

const blogs = await getCollection('blog');
const weekly = await getCollection('weekly');
const stories = await getCollection('stories');

blogs.sort((a, b) => (
    (new Date(a.data.published)) < (new Date(b.data.published)) ? 1 : -1
));
weekly.sort((a, b) => (
    (new Date(a.data.published)) < (new Date(b.data.published)) ? 1 : -1
));
stories.sort((a, b) => (
    (new Date(a.data.published)) < (new Date(b.data.published)) ? 1 : -1
));
---

<Layout title="Yash Karthik" description="Essays and short stories by Yash Karthik.">
  <div class="
    font-serif
  ">
    Many things capture my interest; I write about them here.
  </div>
  
  <main class="font-serif my-7">
    <section class="
      flex flex-row gap-5
      overflow-x-scroll
      divide-x divide-zinc-300 dark:divide-zinc-600 
    ">
      <article class="
        flex flex-col gap-1
        max-w-xs min-w-xs
        pl-5
      ">
        <h1 class=" font-heading text-5xl tracking-tight ">
          <a href={"archive/" + blogs[0].slug} class="
            hover:underline underline-offset-2 decoration-4
            decoration-violet-700 dark:decoration-violet-400 
          ">
            {blogs[0].data.title}
          </a>
        </h1>

        <p class=" text-sm text-zinc-500 dark:text-zinc-400 ">
          {blogs[0].data.published}
        </p>

        <p class="mt-3">{blogs[0].data.description}</p>
      </article>

      <article class="
        flex flex-col gap-5
        max-w-xs min-w-xs
        pl-7 pt-3
      ">
        <div>
          Weekly reflections and updates on my projects, goals and learnings.
        </div>
        {weekly.slice(0, 2).map(week => (
          <section>
            <h1 class=" font-styled-serif font-black text-3xl ">
              <a href={"/archive/weekly/" + week.slug} class="
                hover:underline underline-offset-2 decoration-2
                decoration-violet-700 dark:decoration-violet-400 
              ">
                Week {week.data.weekNum}
              </a>
            </h1>

            <p class=" pl-1 text-sm text-zinc-500 dark:text-zinc-400 ">
              {week.data.published}
            </p>
          </section>
        ))}
      </article>

      <article class="
        flex flex-col gap-1
        max-w-xs min-w-xs
        pl-7
      ">
        <h1 class=" font-heading text-5xl tracking-tight ">
          <a href={"/archive/stories/" + stories[0].slug} class="
            hover:underline underline-offset-2 decoration-4
            decoration-violet-700 dark:decoration-violet-400 
          ">
            {stories[0].data.title}
          </a>
        </h1>

        <p class=" text-sm text-zinc-500 dark:text-zinc-400 ">
          {stories[0].data.published}
        </p>
        <img 
          src={stories[0].data?.image}
          alt={`Cover image for ${stories[0].data.title}`}
          class="
            m-0 p-0 my-3
            rounded-md
        ">
      </article>

    </section>
  </main>
</Layout>